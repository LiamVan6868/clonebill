document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".wt-upload-container"),t=document.getElementById("wt-upload");function n(e){return["image/png","image/jpeg","image/jpg"].includes(e.type)?!(e.size/1048576>10&&(FuiToast.error("Chỉ cho phép tải lên tối đa 10MB."),t.value="",1)):(FuiToast.error("Vui lòng chọn tệp hình ảnh (PNG, JPG, JPEG)."),t.value="",!1)}if(e&&t&&e.classList.contains("wt-upload-container")&&"wt-upload"===t.id&&e.addEventListener("click",(function(){e.classList.contains("uploading")||t.click()})),e&&t){function r(e){let t=0;uploadInterval=setInterval((function(){t>=100?clearInterval(uploadInterval):(t+=Math.floor(16*Math.random())+20,document.querySelector(".nui-progress-bar").style.width=t+"%")}),200)}$(document).on("click",".cancel-wt-upload",(function(){clearInterval(uploadInterval),t.value="",e.classList.remove("uploading"),e.innerHTML='\n                <div role="button" tabindex="-1" class="wt-upload-container">\n                    <div class="nui-focus border-muted-300 dark:border-muted-700 hover:border-muted-400 focus:border-muted-400 dark:hover:border-muted-600 dark:focus:border-muted-700 group cursor-pointer rounded-lg border-[3px] border-dashed p-8 transition-colors duration-300"\n                        tabindex="0" role="button">\n                        <div class="p-5 text-center"><svg xmlns="http://www.w3.org/2000/svg"\n                                xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img"\n                                class="icon text-muted-400 group-hover:text-primary-500 group-focus:text-primary-500 mb-2 size-10 transition-colors duration-300" width="1em" height="1em" viewBox="0 0 24 24"\n                                data-v-b4402e20="">\n                                <path fill="currentColor"\n                                    d="M5.5 20A5.5 5.5 0 0 1 0 14.5A5.5 5.5 0 0 1 5.5 9c1-2.35 3.3-4 6-4c3.43 0 6.24 2.66 6.5 6.03l.5-.03c2.5 0 4.5 2 4.5 4.5S21 20 18.5 20zm0-10C3 10 1 12 1 14.5S3 19 5.5 19h13a3.5 3.5 0 0 0 3.5-3.5a3.5 3.5 0 0 0-3.5-3.5c-.56 0-1.1.13-1.57.37l.07-.87A5.5 5.5 0 0 0 11.5 6a5.51 5.51 0 0 0-5.31 4.05zm6.5 7v-5.25L14.25 14l.75-.66l-3.5-3.5l-3.5 3.5l.75.66L11 11.75V17z">\n                                </path>\n                            </svg>\n                            <h4 class="text-muted-400 font-sans text-sm"> Kéo và thả tệp vào đây </h4>\n                            <div><span\n                                    class="text-muted-400 font-sans text-[0.7rem] font-semibold uppercase">\n                                    Hoặc </span></div><label for="file"\n                                class="text-muted-400 group-hover:text-primary-500 group-focus:text-primary-500 cursor-pointer font-sans text-sm underline underline-offset-4 transition-colors duration-300">\n                                Chọn tệp </label>\n                        </div>\n                    </div>\n                    <input type="file" class="hidden" name="avatar" id="wt-upload">\n                </div>\n            '})),t.addEventListener("change",(function(t){const a=t.target.files[0];if(a){if(!n(a))return;const t=new FileReader;t.onload=function(t){const n=t.target.result,s=a.name,o=`\n                    <ul class="mt-6 space-y-2">\n                        <li>\n                            <div class="border-muted-200 dark:border-muted-700 dark:bg-muted-800 relative flex items-center justify-end gap-2 rounded-xl border bg-white p-3">\n                                <div class="flex items-center gap-2">\n                                    <div class="shrink-0">\n                                        <img class="size-14 rounded-xl object-cover object-center" src="${n}" alt="Ảnh ${s}">\n                                    </div>\n                                    <div class="font-sans w-full max-w-xs">\n                                        <span class="text-muted-800 dark:text-muted-100 line-clamp-1 break-words whitespace-normal block text-sm upload-text-fix">${s}</span>\n                                        <span class="text-muted-400 block text-xs">${(a.size/1024).toFixed(1)+" KB"}</span>\n                                    </div>\n                                </div>\n                                <div class="ms-auto w-32 px-4 transition-opacity duration-300 opacity-100">\n                                    <div role="progressbar" aria-valuenow="0" aria-valuemax="100" class="nui-progress nui-progress-xs nui-progress-default nui-progress-success nui-progress-rounded-full">\n                                        <div class="nui-progress-bar"></div>\n                                    </div>\n                                </div>\n                                <div class="flex gap-2">\n                                    <button class="cancel-wt-upload wt-close border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex size-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300" type="button" tooltip="Cancel">\n                                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="icon size-4" width="1em" height="1em" viewBox="0 0 24 24">\n                                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"></path>\n                                        </svg>\n                                    </button>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                    <div class="hidden" id="file-mt" data-file="${n}">\n                `;e.classList.add("uploading"),e.innerHTML=o,r()},t.readAsDataURL(a)}})),e.addEventListener("dragover",(function(t){t.preventDefault(),e.classList.add("dragover")})),e.addEventListener("dragleave",(function(){e.classList.remove("dragover")})),e.addEventListener("drop",(function(t){t.preventDefault(),e.classList.remove("dragover");const a=t.dataTransfer.files[0];if(n(a)&&a){const t=new FileReader;t.onload=function(t){const n=t.target.result,s=a.name,o=`<ul class="mt-6 space-y-2">\n                        <li>\n                            <div class="border-muted-200 dark:border-muted-700 dark:bg-muted-800 relative flex items-center justify-end gap-2 rounded-xl border bg-white p-3">\n                                <div class="flex items-center gap-2">\n                                    <div class="shrink-0">\n                                        <img class="size-14 rounded-xl object-cover object-center" id="wt-review" src="${n}" alt="Ảnh ${s}">\n                                    </div>\n                                    <div class="font-sans w-full max-w-xs">\n                                        <span class="text-muted-800 dark:text-muted-100 line-clamp-1 whitespace-normal block text-sm upload-text-fix">${s}</span>\n                                        <span class="text-muted-400 block text-xs">${(a.size/1024).toFixed(1)+" KB"}</span>\n                                    </div>\n                                </div>\n                                <div class="ms-auto w-32 px-4 transition-opacity duration-300 opacity-100">\n                                    <div role="progressbar" aria-valuenow="0" aria-valuemax="100" class="nui-progress nui-progress-xs nui-progress-default nui-progress-success nui-progress-rounded-full">\n                                        <div class="nui-progress-bar"></div>\n                                    </div>\n                                </div>\n                                <div class="flex gap-2">\n                                    <button class="cancel-wt-upload wt-close border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex size-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300" type="button" tooltip="Cancel">\n                                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="icon size-4" width="1em" height="1em" viewBox="0 0 24 24">\n                                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"></path>\n                                        </svg>\n                                    </button>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                    <div class="hidden" id="file-mt" data-file="${n}">\n                `;e.classList.add("uploading"),e.innerHTML=o,r()},t.readAsDataURL(a)}}))}}));